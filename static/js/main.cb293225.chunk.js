(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var o=n(1),c=n.n(o),a=n(7),s=n.n(a),i=(n(13),n(3)),r=n(8),l=n(2),u=(n(14),n(0)),d=function(e){var t=e.bookTitle,n=e.bookAuthor,o=e.thumbnail,c=e.currentShelf,a=e.onUpdateShelf,s=e.bookData,i=(n||[]).map((function(e){return void 0===e?"":e})).join(", ");return Object(u.jsx)("li",{children:Object(u.jsxs)("div",{className:"book",children:[Object(u.jsxs)("div",{className:"book-top",children:[Object(u.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(o,")")}}),Object(u.jsx)("div",{className:"book-shelf-changer",children:Object(u.jsxs)("select",{value:c,onChange:function(e){return function(e,t){a(e,t)}(s,e.target.value)},children:[Object(u.jsx)("option",{value:"moveTo",disabled:!0,children:"Move to..."}),Object(u.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(u.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(u.jsx)("option",{value:"read",children:"Read"}),Object(u.jsx)("option",{value:"none",children:"None"})]})})]}),Object(u.jsx)("div",{className:"book-title",children:t}),Object(u.jsx)("div",{className:"book-authors",children:i})]})})},h=function(e){var t=e.onClose,n=e.searchedBooks,c=e.onSearchQuery,a=e.updateShelf,s=Object(o.useState)(""),i=Object(l.a)(s,2),r=i[0],h=i[1],b=Object(o.useState)(!1),j=Object(l.a)(b,2),f=j[0],O=j[1];return Object(o.useEffect)((function(){var e=setTimeout((function(){O(r.length>0),c(r)}),800);return function(){clearTimeout(e)}}),[r]),Object(u.jsxs)("div",{className:"search-books",children:[Object(u.jsxs)("div",{className:"search-books-bar",children:[Object(u.jsx)("a",{className:"close-search",onClick:function(){t(),h(""),O(!1)},children:"Close"}),Object(u.jsx)("div",{className:"search-books-input-wrapper",children:Object(u.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",value:r,onChange:function(e){h(e.target.value)}})})]}),Object(u.jsx)("div",{className:"search-books-results",children:Object(u.jsx)("ol",{className:"books-grid",children:f&&Array.isArray(n)?n.map((function(e){var t;return Object(u.jsx)(d,{bookTitle:e.title,bookAuthor:e.authors,thumbnail:(null===(t=e.imageLinks)||void 0===t?void 0:t.thumbnail)||"https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg",currentShelf:e.shelf,onUpdateShelf:a,bookData:e},e.id)})):null})})]})},b=function(){return Object(u.jsx)("div",{className:"list-books-title",children:Object(u.jsx)("h1",{children:"MyReads"})})},j=function(e){var t=e.title,n=e.books,o=e.shelf,c=e.updateShelf,a=n.filter((function(e){return e.shelf===o}));return console.log(a[0]),Object(u.jsxs)("div",{className:"bookshelf",children:[Object(u.jsx)("h2",{className:"bookshelf-title",children:t}),Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:a.map((function(e){var t;return Object(u.jsx)(d,{bookTitle:e.title,bookAuthor:e.authors,thumbnail:(null===(t=e.imageLinks)||void 0===t?void 0:t.smallThumbnail)||"https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg",currentShelf:o,onUpdateShelf:c,bookData:e},e.id)}))})})]})},f="https://reactnd-books-api.udacity.com",O=localStorage.token;O||(O=localStorage.token=Math.random().toString(36).substr(-8));var m={Accept:"application/json",Authorization:O},p=function(e){var t=e.onOpen;return Object(u.jsx)("div",{className:"open-search",children:Object(u.jsx)("a",{onClick:function(){t()},children:"Add a book"})})};var k=function(){var e=Object(o.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)([]),s=Object(l.a)(a,2),d=s[0],O=s[1],k=Object(o.useState)(""),v=Object(l.a)(k,2),x=v[0],g=v[1],S=Object(o.useState)([]),y=Object(l.a)(S,2),N=y[0],T=y[1],A=Object(o.useState)([]),R=Object(l.a)(A,2),C=(R[0],R[1],function(){c(!n)});Object(o.useEffect)((function(){fetch("".concat(f,"/books"),{headers:m}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){O(e),d.map((function(e){}))}))}),[]),Object(o.useEffect)((function(){""!==x?function(e,t){return fetch("".concat(f,"/search"),{method:"POST",headers:Object(i.a)(Object(i.a)({},m),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books})).catch((function(e){return console.log(e)}))}(x).then((function(e){T(Array.isArray(e)&&e.map((function(e){var t=d.find((function(t){return t.id===e.id}));return e.shelf=t?t.shelf:"none",e})))})):g("")}),[x]);var w=function(e,t){(function(e,t){return fetch("".concat(f,"/books/").concat(e.id),{method:"PUT",headers:Object(i.a)(Object(i.a)({},m),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))})(e,t).then((function(){var n=Object(r.a)(d),o=n.findIndex((function(t){return t.id===e.id}));-1!==o&&n.splice(o,1),"none"!==t&&n.push(Object(i.a)(Object(i.a)({},e),{},{shelf:t})),O(n),T(Array.isArray(N)&&N.map((function(n){return n.id===e.id&&(n.shelf=t),n})))}))};return Object(u.jsx)("div",{className:"app",children:n?Object(u.jsx)(h,{onClose:C,searchedBooks:N,onSearchQuery:function(e){g(e)},updateShelf:w}):Object(u.jsxs)("div",{className:"list-books",children:[Object(u.jsx)(b,{}),Object(u.jsx)("div",{className:"list-books-content",children:Object(u.jsxs)("div",{children:[Object(u.jsx)(j,{title:"Currently Reading",books:d,shelf:"currentlyReading",updateShelf:w}),Object(u.jsx)(j,{title:"Want To Read",books:d,shelf:"wantToRead",updateShelf:w}),Object(u.jsx)(j,{title:"Read",books:d,shelf:"read",updateShelf:w})]})}),Object(u.jsx)(p,{onOpen:C})]})})};s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(k,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.cb293225.chunk.js.map